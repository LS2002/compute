pipeline {
    agent any
    environment {
    }
    stages {
        stage('Update PCB Vars') {
            steps {
                script {
                    def pcbVars = """
product_name: \"${params.PRODUCT_NAME}\"
cycle_name: \"${params.CYCLE_NAME}\"
build_id: \"${env.BUILD_NUMBER}\"
tester_name: \"${env.BUILD_USER_ID}\"
"""
                    writeFile file: 'group_vars/pcb.yml', text: pcbVars
                }
            }
        }
        stage('Check CPU') {
            steps {
                script {
                    def cmd = "ansible-playbook -i inventory/inventory.yml playbooks/check_cpu.yml"
                    sh cmd
                }
            }
        }
        stage('Check GPU') {
            steps {
                script {
                    def cmd = "ansible-playbook -i inventory/inventory.yml playbooks/check_gpu.yml"
                    sh cmd
                }
            }
        }
        stage('Check Memory') {
            steps {
                script {
                    def cmd = "ansible-playbook -i inventory/inventory.yml playbooks/check_memory.yml"
                    sh cmd
                }
            }
        }
        stage('Check Disk') {
            steps {
                script {
                    def cmd = "ansible-playbook -i inventory/inventory.yml playbooks/check_disk.yml"
                    sh cmd
                }
            }
        }
        stage('Check Network') {
            steps {
                script {
                    def cmd = "ansible-playbook -i inventory/inventory.yml playbooks/check_network.yml"
                    sh cmd
                }
            }
        }
        stage('Check OS') {
            steps {
                script {
                    def cmd = "ansible-playbook -i inventory/inventory.yml playbooks/check_os.yml"
                    sh cmd
                }
            }
        }
        stage('Check Process') {
            steps {
                script {
                    def cmd = "ansible-playbook -i inventory/inventory.yml playbooks/check_process.yml"
                    sh cmd
                }
            }
        }
        stage('Check Services') {
            steps {
                script {
                    def cmd = "ansible-playbook -i inventory/inventory.yml playbooks/check_services.yml"
                    sh cmd
                }
            }
        }
        stage('Check Storage') {
            steps {
                script {
                    def cmd = "ansible-playbook -i inventory/inventory.yml playbooks/check_storage.yml"
                    sh cmd
                }
            }
        }
        stage('Check Filesystem') {
            steps {
                script {
                    def cmd = "ansible-playbook -i inventory/inventory.yml playbooks/check_filesystem.yml"
                    sh cmd
                }
            }
        }
    }
} 